{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>👩‍💻 Admin Panel – All Fanfics</h2>

    {% if fanfics %}
        {% for fanfic in fanfics %}
            <div class="fanfic-card">
                <h3>{{ fanfic.title }}</h3>
                <p><strong>Author:</strong> {{ fanfic.author }}</p>
                <p>{{ fanfic.description }}</p>
                <p><strong>❤️ Likes:</strong> {{ fanfic.likes }} | <strong>💬 Comments:</strong> {{ fanfic.comments | length }}</p>

                <a href="/fanfic/{{ fanfic.id }}">📖 Read</a>

                <div style="margin-top: 15px;">
                    <form action="/edit/{{ fanfic.id }}" method="GET" style="display:inline;">
                        <button type="submit">✏️ Edit</button>
                    </form>
                    <form action="/delete/{{ fanfic.id }}" method="POST" style="display:inline; margin-left:10px;">
                        <input type="password" name="password" placeholder="Password" required style="width: 140px;">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this fanfic?')">
                            🗑️ Delete
                        </button>
                    </form>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No fanfics found 🫧</p>
    {% endif %}
</div>
{% endblock %}


